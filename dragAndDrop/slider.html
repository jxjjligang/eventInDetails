<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="slider.css">
</head>

<body id="body" height="100%">

    <div id="slider" class="slider">
        <div class="thumb" id="thumbDiv"></div>
    </div>

    <script>

        let dragged = false;
        let shiftX = undefined;
        let sliderLeft = slider.getBoundingClientRect().left;
        let sliderRight = sliderLeft + slider.getBoundingClientRect().width;

        body.onmousedown = function (event) {
            if (event.target !== thumbDiv)
                return;

            dragged = true;
            if (!shiftX)
                shiftX = event.clientX - 18;
            // console.log('mousedown');
        }

        body.onmousemove = function (event) {
            if (!dragged)
                return;

            thumbDiv.style.position = "absolute";
            thumbDiv.style.top = (slider.getBoundingClientRect().top - 5) + 'px';
            let newLeft = event.clientX - shiftX;
            if (newLeft <= 8) {
                newLeft = 8;
                dragged = false;
            }

            if (newLeft >= 308) {
                newLeft = 308;
                dragged = false;
            }
            thumbDiv.style.left = newLeft + 'px';
            // console.log(`mousemove, ${event.clientLeft}`);
        }

        body.onmouseup = function (event) {
            dragged = false;

        }

        body.onmouseout = function (event) {
            if (body.contains(event.relatedTarget))
                return;

            dragged = false;
            console.log('onmouseout');
        }
    </script>

</body>

</html>